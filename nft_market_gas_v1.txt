No files changed, compilation skipped
Warning: Replayed invariant failure from "/Users/jac/Repos/smart-contract-learning/cache/invariant/failures/NFTMarketTest/invariant_MarketHasNoTokenBalance" file. 
Run `forge clean` or remove file to ignore failure and to continue invariant test campaign.

Ran 17 tests for test/NFTMarket.t.sol:NFTMarketTest
[FAIL: invariant_MarketHasNoTokenBalance replay failure]
	[Sequence] (original: 1, shrunk: 1)
		sender=0xF62849F9A0B5Bf2913b396098F7c7019b51A820a addr=[contracts/ERC20WithCallbackAndData.sol:ERC20WithCallbackAndData]0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f calldata=mint(uint256) args=[531]
 invariant_MarketHasNoTokenBalance() (runs: 1, calls: 1, reverts: 1)
[PASS] testFuzz_Buy_RandomAddress(uint256) (runs: 256, μ: 401617, ~: 401441)
[PASS] testFuzz_ListAndBuy_RandomPrice(uint256) (runs: 256, μ: 370882, ~: 371124)
[PASS] testFuzz_ListAndBuy_RandomPriceAndAddress(uint256,uint256) (runs: 256, μ: 405444, ~: 405446)
[PASS] test_BuyNFT_Fail_AlreadySold() (gas: 427037)
[PASS] test_BuyNFT_Fail_BuyOwnNFT() (gas: 342042)
[PASS] test_BuyNFT_Fail_InsufficientPayment() (gas: 306909)
[PASS] test_BuyNFT_Fail_NotListed() (gas: 37079)
[PASS] test_BuyNFT_Success() (gas: 430112)
[PASS] test_BuyWithCallback_Fail_InsufficientPayment() (gas: 283764)
[PASS] test_BuyWithCallback_RefundsExcess() (gas: 332333)
[PASS] test_Delist_Fail_NotSeller() (gas: 239868)
[PASS] test_Delist_Success() (gas: 291280)
[PASS] test_List_Fail_NotApproved() (gas: 47275)
[PASS] test_List_Fail_NotOwner() (gas: 40784)
[PASS] test_List_Fail_ZeroPrice() (gas: 87759)
[PASS] test_List_Success() (gas: 238213)
Suite result: FAILED. 16 passed; 1 failed; 0 skipped; finished in 40.93ms (135.14ms CPU time)

╭--------------------------------------------------------------------------+-----------------+-------+--------+--------+---------╮
| contracts/ERC20WithCallbackAndData.sol:ERC20WithCallbackAndData Contract |                 |       |        |        |         |
+================================================================================================================================+
| Deployment Cost                                                          | Deployment Size |       |        |        |         |
|--------------------------------------------------------------------------+-----------------+-------+--------+--------+---------|
| 820265                                                                   | 3826            |       |        |        |         |
|--------------------------------------------------------------------------+-----------------+-------+--------+--------+---------|
|                                                                          |                 |       |        |        |         |
|--------------------------------------------------------------------------+-----------------+-------+--------+--------+---------|
| Function Name                                                            | Min             | Avg   | Median | Max    | # Calls |
|--------------------------------------------------------------------------+-----------------+-------+--------+--------+---------|
| approve                                                                  | 46159           | 46179 | 46183  | 46183  | 773     |
|--------------------------------------------------------------------------+-----------------+-------+--------+--------+---------|
| balanceOf                                                                | 2534            | 2534  | 2534   | 2534   | 264     |
|--------------------------------------------------------------------------+-----------------+-------+--------+--------+---------|
| mint                                                                     | 29485           | 29485 | 29485  | 29485  | 1       |
|--------------------------------------------------------------------------+-----------------+-------+--------+--------+---------|
| transfer                                                                 | 51417           | 51539 | 51501  | 51669  | 547     |
|--------------------------------------------------------------------------+-----------------+-------+--------+--------+---------|
| transferWithCallback                                                     | 65252           | 89382 | 89382  | 113512 | 2       |
╰--------------------------------------------------------------------------+-----------------+-------+--------+--------+---------╯

╭--------------------------------------------+-----------------+--------+--------+--------+---------╮
| contracts/NFTMarket.sol:NFTMarket Contract |                 |        |        |        |         |
+===================================================================================================+
| Deployment Cost                            | Deployment Size |        |        |        |         |
|--------------------------------------------+-----------------+--------+--------+--------+---------|
| 1592664                                    | 8094            |        |        |        |         |
|--------------------------------------------+-----------------+--------+--------+--------+---------|
|                                            |                 |        |        |        |         |
|--------------------------------------------+-----------------+--------+--------+--------+---------|
| Function Name                              | Min             | Avg    | Median | Max    | # Calls |
|--------------------------------------------+-----------------+--------+--------+--------+---------|
| buyNFT                                     | 24317           | 97922  | 96671  | 101471 | 774     |
|--------------------------------------------+-----------------+--------+--------+--------+---------|
| delist                                     | 26502           | 44571  | 44571  | 62641  | 2       |
|--------------------------------------------+-----------------+--------+--------+--------+---------|
| getListing                                 | 11569           | 11569  | 11569  | 11569  | 3       |
|--------------------------------------------+-----------------+--------+--------+--------+---------|
| list                                       | 22720           | 154230 | 154721 | 154721 | 780     |
╰--------------------------------------------+-----------------+--------+--------+--------+---------╯

╭------------------------------------------------------------+-----------------+--------+--------+--------+---------╮
| contracts/YangmingGardenNFT.sol:YangmingGardenNFT Contract |                 |        |        |        |         |
+===================================================================================================================+
| Deployment Cost                                            | Deployment Size |        |        |        |         |
|------------------------------------------------------------+-----------------+--------+--------+--------+---------|
| 1302386                                                    | 6026            |        |        |        |         |
|------------------------------------------------------------+-----------------+--------+--------+--------+---------|
|                                                            |                 |        |        |        |         |
|------------------------------------------------------------+-----------------+--------+--------+--------+---------|
| Function Name                                              | Min             | Avg    | Median | Max    | # Calls |
|------------------------------------------------------------+-----------------+--------+--------+--------+---------|
| approve                                                    | 48673           | 48673  | 48673  | 48673  | 778     |
|------------------------------------------------------------+-----------------+--------+--------+--------+---------|
| getApproved                                                | 2817            | 2817   | 2817   | 2817   | 778     |
|------------------------------------------------------------+-----------------+--------+--------+--------+---------|
| isApprovedForAll                                           | 2801            | 2801   | 2801   | 2801   | 1       |
|------------------------------------------------------------+-----------------+--------+--------+--------+---------|
| ownerOf                                                    | 2616            | 2616   | 2616   | 2616   | 1550    |
|------------------------------------------------------------+-----------------+--------+--------+--------+---------|
| safeMint                                                   | 118311          | 118311 | 118311 | 118311 | 17      |
╰------------------------------------------------------------+-----------------+--------+--------+--------+---------╯


Ran 1 test suite in 104.50ms (40.93ms CPU time): 16 tests passed, 1 failed, 0 skipped (17 total tests)

Failing tests:
Encountered 1 failing test in test/NFTMarket.t.sol:NFTMarketTest
[FAIL: invariant_MarketHasNoTokenBalance replay failure]
	[Sequence] (original: 1, shrunk: 1)
		sender=0xF62849F9A0B5Bf2913b396098F7c7019b51A820a addr=[contracts/ERC20WithCallbackAndData.sol:ERC20WithCallbackAndData]0x5615dEB798BB3E4dFa0139dFa1b3D433Cc23b72f calldata=mint(uint256) args=[531]
 invariant_MarketHasNoTokenBalance() (runs: 1, calls: 1, reverts: 1)

Encountered a total of 1 failing tests, 16 tests succeeded

Tip: Run `forge test --rerun` to retry only the 1 failed test
