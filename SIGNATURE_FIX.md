# ğŸ”‘ å¦‚ä½•æµ‹è¯• NFT ç™½åå•è´­ä¹°

## âŒ ç­¾åéªŒè¯å¤±è´¥çš„åŸå› 

ä½ é‡åˆ° "invalid signature" é”™è¯¯æ˜¯å› ä¸ºï¼š

**é—®é¢˜**ï¼š

- ä½ ç”¨ `0x5D26552Fe617460250e68e737F2A60eA6402eEA9` ä¸ºè‡ªå·±ç­¾å
- ä½†åˆçº¦éªŒè¯çš„æ˜¯**é¡¹ç›®æ–¹è´¦æˆ·** `0x37D8738B0218E1113365C3241Ed3bA0852648302` çš„ç­¾å
- ç­¾åè€…å¿…é¡»æ˜¯é¡¹ç›®æ–¹ï¼

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šå¯¼å…¥é¡¹ç›®æ–¹è´¦æˆ·åˆ° MetaMaskï¼ˆæ¨èæµ‹è¯•ï¼‰

1. **æ‰“å¼€ MetaMask**
2. **å¯¼å…¥è´¦æˆ·**
   - ç‚¹å‡»è´¦æˆ·å›¾æ ‡ â†’ "å¯¼å…¥è´¦æˆ·"
   - ç²˜è´´é¡¹ç›®æ–¹ç§é’¥ï¼š

     ```
     0x75ec1ca4626df8da1b7c912762bcbe554e5f62c9f6b75960c15df941622515b4
     ```

   - å¯¼å…¥åä¼šçœ‹åˆ°åœ°å€ï¼š`0x37D8738B0218E1113365C3241Ed3bA0852648302`

3. **åˆ‡æ¢åˆ°é¡¹ç›®æ–¹è´¦æˆ·**
4. **è®¿é—®** <http://localhost:3000/nft-whitelist>
5. **ç‚¹å‡»ç»¿è‰²æŒ‰é’®** "âš¡ é¡¹ç›®æ–¹è‡ªåŠ¨ç­¾åå¹¶è´­ä¹°"
6. **å®Œæˆï¼**

### æ–¹æ¡ˆ 2ï¼šæ‰‹åŠ¨è·å–ç­¾åï¼ˆæ›´çœŸå®çš„æµç¨‹ï¼‰

#### æ­¥éª¤ Aï¼šé¡¹ç›®æ–¹ç”Ÿæˆç­¾å

åœ¨å‘½ä»¤è¡Œè¿è¡Œï¼š

```bash
cd /Users/jac/Repos/smart-contract-learning

# ä¸ºä¹°å®¶ç”Ÿæˆç­¾å
cast wallet sign-typed-data \
  --from 0x37D8738B0218E1113365C3241Ed3bA0852648302 \
  --private-key 0x75ec1ca4626df8da1b7c912762bcbe554e5f62c9f6b75960c15df941622515b4 \
  --data '{
    "domain": {
      "name": "NFTMarket",
      "version": "1", 
      "chainId": "11155111",
      "verifyingContract": "0x4da1B8900A066A8b6f2198b028FAE5635b6aE5ea"
    },
    "types": {
      "WhitelistPermit": [
        {"name": "buyer", "type": "address"},
        {"name": "nftContract", "type": "address"},
        {"name": "tokenId", "type": "uint256"},
        {"name": "nonce", "type": "uint256"},
        {"name": "deadline", "type": "uint256"}
      ]
    },
    "primaryType": "WhitelistPermit",
    "message": {
      "buyer": "0x5D26552Fe617460250e68e737F2A60eA6402eEA9",
      "nftContract": "0xE845959F4A838f3114b52317f7BC6dA48B0De8e5",
      "tokenId": "0",
      "nonce": "0",
      "deadline": "'$(($(date +%s) + 36000))'"
    }
  }'
```

#### æ­¥éª¤ Bï¼šä¹°å®¶ä½¿ç”¨ç­¾å

1. åˆ‡æ¢å›ä¹°å®¶è´¦æˆ· `0x5D26552Fe617460250e68e737F2A60eA6402eEA9`
2. è®¿é—® <http://localhost:3000/nft-whitelist>
3. åœ¨æ‰‹åŠ¨è¾“å…¥åŒºåŸŸï¼š
   - NFT Token ID: `0`
   - Whitelist Signature: (ç²˜è´´ä¸Šé¢ç”Ÿæˆçš„ç­¾å)
4. ç‚¹å‡» "ğŸ¨ Purchase NFT"

## ğŸ¯ æ¨èï¼šä½¿ç”¨æ–¹æ¡ˆ 1

å¯¹äºæµ‹è¯•æ¥è¯´ï¼Œæ–¹æ¡ˆ 1 æœ€ç®€å•ï¼š

1. å¯¼å…¥é¡¹ç›®æ–¹ç§é’¥åˆ° MetaMask
2. åˆ‡æ¢è´¦æˆ·
3. ä¸€é”®è´­ä¹°

è¿™æ ·å¯ä»¥å®Œæ•´æµ‹è¯•è‡ªåŠ¨ç­¾ååŠŸèƒ½ï¼

## ğŸ“Š UI å·²æ›´æ–°

- âœ… æ£€æµ‹å½“å‰è´¦æˆ·æ˜¯å¦æ˜¯é¡¹ç›®æ–¹
- âœ… æ˜¾ç¤ºæ¸…æ™°çš„æç¤ºä¿¡æ¯
- âœ… éé¡¹ç›®æ–¹è´¦æˆ·æ—¶æŒ‰é’®å˜ç°å¹¶ç¦ç”¨
- âœ… æä¾›è¯¦ç»†çš„é”™è¯¯è¯´æ˜

åˆ·æ–°é¡µé¢å³å¯çœ‹åˆ°æ›´æ–°ï¼
